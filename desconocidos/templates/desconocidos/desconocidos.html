{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% block contenido %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js" type="text/javascript"></script>"

<div class="row justify-content-center">

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>

    <div class="card ml-3 mb-2" style="width: 18rem;">
        <canvas class="card-img-top" id="myChart" width="400" height="400"></canvas>
        <div class="card-body">
            <h5 class="card-title">Card title</h5>
            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
    </div>


</div>

<!--<div class="container">-->
    <!--<canvas id="myChart" width="400" height="400"></canvas>-->
<!--</div>-->
<script>
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>


<link rel="stylesheet" type="text/css" href="{% static 'polls/styles.css' %}" />
<div class="container-fluid text-right mb-2">
    <form method="get" class="form-inline flex-row-reverse">
        <button type="submit" class="btn btn-primary mb-2 ml-2">Buscar</button>
        <input type="text" id="idCriterio" name="q" class="form-control mb-2 col-3" placeholder="Búsqueda" value="{{q}}" autofocus>
    </form>
</div>
{% if lista_desc %}
<div class="container-fluid">
<table class="table table-sm table-hover">
    <thead>
    <tr>
        <th scope="col">#</th>
        <th scope="col">ORGANISMO</th>
        <th scope="col">MUNICIPIO</th>
        <th scope="col">REFERENCIA CATASTRAL</th>
        <th scope="col">TIPO</th>
        <th scope="col">CUOTA IBI</th>
        <th scope=""col>RESUELTO</th>
    </tr>
  </thead>
{% for desc in lista_desc %}
    <tr>
        <td>{{forloop.counter0|add:lista_desc.start_index }}</td>
        <td>{{ desc.fk_muni.org.nombre }}</td>
        <td>{{ desc.fk_muni.nombre }}</td>
        <td><a href="{{desc.pk}}">{{ desc.refcat }}</a></td>
        <td>{{ desc.tipo }}</td>
        <td>{{ desc.getIbi }}</td>
        {% if desc.resuelto == True %}
            <td><img src="{% static 'img/ok.svg' %}" width="25" height="25"></td>
        {% else %}
            <td><img src="{% static 'img/fail.svg' %}" width="25" height="25"></td>
        {% endif %}
    </tr>
{% endfor %}
</table>
</div>

<!--<div class="pagination">
    <span class="step-links">
        {% if lista_desc.has_previous %}
            <a href="?pag=1">&laquo; Primera</a>
            <a href="?pag={{ lista_desc.previous_page_number }}">anterior</a>
        {% endif %}

        <span class="current">
            Page {{ lista_desc.number }} of {{ lista_desc.paginator.num_pages }}.
        </span>

        {% if lista_desc.has_next %}
            <a href="?pag={{ lista_desc.next_page_number }}">siguiente</a>
            <a href="?pag={{ lista_desc.paginator.num_pages }}">Última &raquo;</a>
        {% endif %}
    </span>
</div>-->
<div class="container-fluid -mb-6">
    <nav>
        <ul class="pagination pagination-sm justify-content-center">
                {% if lista_desc.has_previous %}
                    <li class="page-item"><a class="page-link" href="?pag=1&q={{request.GET.q}}">Primera</a></li>
                    <li><a class="page-link" href="?pag={{ lista_desc.previous_page_number }}&q={{request.GET.q}}">Anterior</a></li>
                {% endif %}

                {% for i in paginas %}

                    <li {% if lista_desc.number == i %} class="page-item active" {% else %} class="page-item"{% endif %}><a class="page-link" href="?pag={{i}}&q={{request.GET.q}}">{{i}}</a></li>
                {% endfor %}

                {% if lista_desc.has_next %}
                    <li class="page-item"><a class="page-link" href="?pag={{ lista_desc.next_page_number }}&q={{request.GET.q}}">Siguiente</a></li>
                    <li class="page-item"><a class="page-link" href="?pag={{ lista_desc.paginator.num_pages }}&q={{request.GET.q}}">Última</a></li>
                {% endif %}
            </ul>
    </nav>
</div>
<div class="container-fluid text-center -mt-6">
    Mostrando {{inicio}} a {{final}} de {{total}}
</div>
{% else %}
{% endif %}
{% endblock %}